<!doctype html>
<html>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>OCL.js Examples</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/skeleton.css">
    <link rel="stylesheet" href="css/examples.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/styles/vs.min.css">
    <style>
        code {
            position: relative;
        }
        code:before {
            position: absolute;
            top: 0;
            right: 0;
            border: 1px solid #e1e1e1;
            border-top: none;
            border-right: none;
            border-bottom-left-radius: 4px;
            background-color: rgba(255,255,255,0.4);
            padding: 0 6px;
        }
        .ocl:before {
            content: 'OCL';
        }
        .js:before {
            content: 'JavaScript';
        }
        .operations dt {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>OCL.js</h1>
        <p>
            The OCL ist a language used in Meta-Modelling to add additional constraints to the meta model which can't be
            expressed by the given meta modelling language. Since there do exist implementations in Java
            (e.g. Eclipse Modelling Framework EMF), this is a basic OCL implementation in JavaScript.
        </p>

        <hr>

        <h2>Available expressions</h2>
        <div class="row">
            <div class="six columns">
                <h5>Context</h5>
                <p>
                    Define a valid context for the ocl rule.
                    The context constraints the execution of an ocl rule to a specific type.
                    Even though javascripts typesystem functions at a very low level, the context expression tries to guess the type as follows:
                    
                    <pre><code class="gen plain">function Person() {}    => Person
class Person {}         => Person
{}                      => Object
function() {}           => undefined</code></pre>

                    When calling an OCL rule like the one below, it will only apply on objects which are of type "Person".
                    "Type of" in context of OCL means, that the object is a direct instance of the given type.

                    <pre><code class="ocl">context Person inv: [...]</code></pre>
                </p>
                <h5>Invariants</h5>
                <p>
                    One can define multiple invariants per context which are started using the keyword <em>inv</em>.
                <pre><code class="ocl">inv: self.variable = "value"</code></pre>
                </p>
                <h5>Definitions</h5>
                <p>
                    When one wants to define additional variables before invariants are executed, one can use the
                    keyword <em>def</em> for creating variable definitions.

                <pre><code class="ocl">def: let name: "value" </code></pre>
                </p>
                <h5>Logic gates</h5>
                <p>
                    Boolean expressions can be concatenated by using the keywords
                    <strong>and</strong>, <strong>or</strong> and <strong>xor</strong>.
                </p>
                <h5>Operators</h5>
                <p>
                    The operators <strong>=</strong>, <strong>&lt;</strong>, <strong>&lt;=</strong>,
                    <strong>&gt;=</strong> and <strong>&lt;&gt;</strong> can be used to compare literals.
                </p>
                <h5>Literals</h5>
                <p>
                    The current implementation supports <strong>String</strong>, <strong>Boolean</strong>,
                    <strong>Number</strong> and <strong>Nil</strong> literals.
                </p>
            </div>
            <!-- -->
            <div class="six columns">
                <h5>Collection operations</h5>
                <dl class="operations">
                    <dt>Collection->exists(expr)</dt>
                    <dd>Operation which checks whether a collection contains an element specified by <em>expr</em>.</dd>

                    <dt>Collection->isEmpty()</dt>
                    <dd>Returns true when collection is empty, false otherwise.</dd>

                    <dt>Collection->isNotEmpty()</dt>
                    <dd>Returns false when collection is empty, true otherwise.</dd>

                    <dt>Collection->select(expr)</dt>
                    <dd>Selects all elements from collection which fit tje <em>expr</em>.</dd>

                    <dt>Collection->union(Collection)</dt>
                    <dd>Concatenates the two given collections and returns one single collection.</dd>

                    <dt>Collection->at(index:Number)</dt>
                    <dd>Returns the element of the collection at index <em>index</em></dd>

                    <dt>Collection->first()</dt>
                    <dd>Returns the first element of the collection.</dd>

                    <dt>Collection->last()</dt>
                    <dd>Returns the last element of the collection.</dd>

                    <dt>Collection->asSet()</dt>
                    <dd>Returns the given collection as set, containing unique entries.</dd>

                    <dt>Collection->size()</dt>
                    <dd>Returns the length of the given collection.</dd>
                </dl>
            </div>
        </div>

        <hr>

        <h2>Examples</h2>
        <p>
            The following paragraphs contain some OCL constraints which are evaluated live while this page loads.
            To create a use case, the following images shows two connected classes which describe the following:
            A person can own multiple cars.
            A car belongs to just one person.
            A car has a color.
            A person has a name as well as its age.
        </p>
        <div style="margin: 0 auto; text-align: center;">
            <picture style="width: 200px;">
                <img src="img/uml-example.png">
                <label>UML diagram used as use case</label>
            </picture>
        </div>

        <div class="example" id="example1">
            <h5 class="title"></h5>
            <div>
                <pre><code class="js"></code></pre>
                <pre><code class="ocl"></code></pre>
                <p><span class="result"></span></p>
            </div>
        </div>

        <div class="example" id="example2">
            <h5 class="title"></h5>
            <div>
                <pre><code class="js"></code></pre>
                <pre><code class="ocl"></code></pre>
                <p><span class="result"></span></p>
            </div>
        </div>

        <div class="example" id="example3">
            <h5 class="title"></h5>
            <div>
                <pre><code class="js"></code></pre>
                <pre><code class="ocl"></code></pre>
                <p><span class="result"></span></p>
            </div>
        </div>

        <div class="example" id="example4">
            <h5 class="title"></h5>
            <div>
                <pre><code class="js"></code></pre>
                <pre><code class="ocl"></code></pre>
                <p><span class="result"></span></p>
            </div>
        </div>

        <div class="example" id="example5">
            <h5 class="title"></h5>
            <div>
                <pre><code class="js"></code></pre>
                <pre><code class="ocl"></code></pre>
                <p><span class="result"></span></p>
            </div>
        </div>

        <div class="example" id="example6">
            <h5 class="title"></h5>
            <div>
                <pre><code class="js"></code></pre>
                <pre><code class="ocl"></code></pre>
                <p><span class="result"></span></p>
            </div>
        </div>

        <hr>
        <p class="text-center">
            &copy; Stephan KÃ¶ninger
        </p>
    </div>

    <script src="examples.min.js"></script>
</body>
</html>